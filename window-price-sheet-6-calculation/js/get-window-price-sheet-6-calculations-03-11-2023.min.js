$((function(){$.ajax({url:"window-price-sheet-6-calculation/scripts/get-window-price-sheet-6-calculations.php",type:"POST",dataType:"json",data:{cid:cid},beforeSend:function(){},success:function(e){4===e[0]?document.location.replace(e[1]):2===e[0]?alert(e[1]):1===e[0]?($.each(e[1],(function(t,o){var n=o.code,l="",c="",d="";if("on"===etape&&(l="etape-activated",c='<th class="etape-th">\n                                            <table class="left-fixed-column">\n                                                <tr>\n                                                    <th></th>                                                </tr>\n                                            </table>\n                                        </th>',d='<td class="etape-td">\n                                            <table class="left-fixed-column">\n                                                <tr>\n                                                    <td><input type="button" data-mc-db="window_price_sheet_6_calculation" data-sc-code="'+o.code+'" data-sc-name="'+o.name+'" class="bttn-input etape-btn" value="☯"></td>\n                                                </tr>\n                                            </table>\n                                        </td>'),1===o.location_select){var s="<th>Locations</th>",r="";$.each(e[2],(function(e,t){r+='<option value="'+t.name+"<->"+t.code+'">'+t.name+"</option>"}));var p='<td>\n                                                    <select name="location" data-column="location" class="window-price-sheet-6-calculation-location data-field">\n                                                        <option value=""></option>\n                                                        '+r+"                                                    </select>\n                                                </td>"}else s="",r="",p="";var u,f="<th>Types</th>",h="";$.each(o.types,(function(e,t){var a=JSON.stringify(t.min_max_dimensions),i=JSON.stringify(t.materials_and_colours);h+='<option value="'+t.name+"<->"+t.code+"\" data-materials-and-colours='"+i+"' data-min-max-dimensions='"+a+"' data-code=\""+t.code+'">'+t.name+"</option>"})),u='<td>\n                                        <select name="type" data-column="type" class="window-price-sheet-6-calculation-type data-field approved-disabled">\n                                            <option value=""></option>\n                                            '+h+"                                        </select>\n                                    </td>";var w,m="<th>Fullness</th>",b="";if($.each(o.fullness,(function(e,t){b+='<option value="'+t.name+"<->"+t.code+'" data-code="'+t.code+'">'+t.name+"</option>"})),w='<td>\n                                        <select name="fullness" data-column="fullness" class="window-price-sheet-6-calculation-fullness data-field">\n                                            <option value=""></option>\n                                            '+b+"                                        </select>\n                                    </td>",1===o.materials_and_colour_select)var v="<th>Materials</th>",y='<td>\n                                                    <select name="material" data-column="material" class="window-price-sheet-6-calculation-material data-field">\n                                                        <option value=""></option>\n                                                    </select>\n                                                </td>',g="<th>Colours</th>",_='<td>\n                                                    <select name="colour" data-column="colour" class="window-price-sheet-6-calculation-colour data-field">\n                                                        <option value=""></option>\n                                                    </select>\n                                                    <span class="window-price-sheet-6-calculation-add-colour-wrapper">\n                                                        <input type="text" class="window-price-sheet-6-calculation-add-colour text-input">\n                                                        <input type="button" class="window-price-sheet-6-calculation-add-colour-submit bttn-input" value="✚">\n                                                        <input type="button" class="window-price-sheet-6-calculation-add-colour-close bttn-input" value="✖">\n                                                    </span>\n                                                </td>';else v="",g="",y="",_="";var x="",q="",C="",k="";if($.each(o.fields,(function(e,t){if(1===t.side)if(x+="<th>"+t.name+"</th>",0===t.field_type){var a="";$.each(t.options,(function(e,t){var i=t.price>0?" | "+t.price:"";a+='<option value="'+t.name+"<->"+t.code+"<->"+t.price+'">'+t.name+i+"</option>"})),a+='<option class="window-price-sheet-6-calculation-add-field-option-x" data-field-code="'+t.code+'" value="add-new">Add New</option>',q+='<td>\n                                                        <select name="field['+t.code+']" data-code="'+t.code+'" data-name="'+t.name+'" data-column="field-'+t.code+'" class="window-price-sheet-6-calculation-field data-field">\n                                                            <option value=""></option>\n                                                            '+a+'                                                        </select>\n                                                        <span class="window-price-sheet-6-calculation-add-field-option-wrapper">\n                                                            <input type="text" class="window-price-sheet-6-calculation-add-field-option text-input">\n                                                            <input type="button" class="window-price-sheet-6-calculation-add-field-option-submit bttn-input" value="✚">\n                                                            <input type="button" class="window-price-sheet-6-calculation-add-field-option-close bttn-input" value="✖">\n                                                        </span>\n                                                    </td>'}else q+='<td>\n                                                        <input type="text" name="field['+t.code+']" data-code="'+t.code+'" data-name="'+t.name+'" data-column="field-'+t.code+'" class="window-price-sheet-6-calculation-field data-field text-field" autocomplete="off">\n                                                    </td>';if(0===t.side)if(C+="<th>"+t.name+"</th>",0===t.field_type){a="";$.each(t.options,(function(e,t){var i=t.price>0?" | "+t.price:"";a+='<option value="'+t.name+"<->"+t.code+"<->"+t.price+'">'+t.name+i+"</option>"})),a+='<option class="window-price-sheet-6-calculation-add-field-option-x" data-field-code="'+t.code+'" value="add-new">Add New</option>',k+='<td>\n                                                            <select name="field['+t.code+']" data-code="'+t.code+'" data-name="'+t.name+'" data-column="field-'+t.code+'" class="window-price-sheet-6-calculation-field data-field">\n                                                                <option value=""></option>\n                                                                '+a+'                                                            </select>\n                                                            <span class="window-price-sheet-6-calculation-add-field-option-wrapper">\n                                                                <input type="text" class="window-price-sheet-6-calculation-add-field-option text-input">\n                                                                <input type="button" class="window-price-sheet-6-calculation-add-field-option-submit bttn-input" value="✚">\n                                                                <input type="button" class="window-price-sheet-6-calculation-add-field-option-close bttn-input" value="✖">\n                                                            </span>\n                                                        </td>'}else k+='<td>\n                                                            <input type="text" name="field['+t.code+']" data-code="'+t.code+'" data-name="'+t.name+'" data-column="field-'+t.code+'" class="window-price-sheet-6-calculation-field data-field text-field" autocomplete="off">\n                                                        </td>'})),1===o.accessories_select){var S="",O="",N='<input type="hidden" class="accessory-option-array" value=\''+JSON.stringify(o.accessory_options)+"'>";$.each(o.accessory_options,(function(e,t){O+='<option data-code="'+t.code+'" value="'+t.code+"<->"+t.name+"<->"+t.price+'">'+t.name+" | "+t.price+"</option>"})),S='<span class="window-price-sheet-6-calculation-accessories-wrapper">\n                                                <select class="window-price-sheet-6-calculation-accessories">\n                                                    <option value="">Accessories</option>\n                                                    '+O+'                                                </select>\n                                                <input type="tel" class="add-window-price-sheet-6-calculation-accessory-mm qty-input" placeholder="mm">\n                                                <input type="tel" class="add-window-price-sheet-6-calculation-accessory-qty qty-input" placeholder="Qty">\n                                                <input type="button" class="add-window-price-sheet-6-calculation-accessories bttn-input" value="✚">\n                                            </span>'}else S="",N="";if(1===o.per_meters_select){var T="",J="",j='<input type="hidden" class="per-meter-option-array" value=\''+JSON.stringify(o.per_meter_options)+"'>";$.each(o.per_meter_options,(function(e,t){J+='<option data-code="'+t.code+'" value="'+t.code+"<->"+t.name+"<->"+t.price+'">'+t.name+" | "+t.price+"</option>"})),T='<span class="window-price-sheet-6-calculation-accessories-wrapper">\n                                                <select class="window-price-sheet-6-calculation-per-meters">\n                                                    <option value="">Per Meters</option>\n                                                    '+J+'                                                </select>\n                                                <input type="tel" class="add-window-price-sheet-6-calculation-per-meter-width qty-input" placeholder="Width">\n                                                <input type="button" class="add-window-price-sheet-6-calculation-per-meters bttn-input" value="✚">\n                                            </span>'}else T="",j="";if(1===o.fitting_charges_select){var P="",A="",I='<input type="hidden" class="fitting-charge-option-array" value=\''+JSON.stringify(o.fitting_charge_options)+"'>";$.each(o.fitting_charge_options,(function(e,t){A+='<option data-code="'+t.code+'" value="'+t.code+"<->"+t.name+"<->"+t.price+'">'+t.name+" | "+t.price+"</option>"})),P='<span class="window-price-sheet-6-calculation-fitting-charges-wrapper">\n                                                    <select class="window-price-sheet-6-calculation-fitting-charges">\n                                                        <option value="">Fitting Charges</option>\n                                                        '+A+'                                                    </select>\n                                                    <input type="button" class="add-window-price-sheet-6-calculation-fitting-charges bttn-input" value="✚">\n                                                </span>'}else P="",I="";if(1===o.status&&($('<li><a href="#tab-'+o.code+'" class="active-calcs" data-calc-code="window_price_sheet_6_calculation"  data-calc-name="'+o.name+'">'+o.name+"</a></li>").prependTo("#window-price-sheet-6-calculation-tabs .tabs ul"),$('<div id="tab-'+o.code+'" class="window-price-sheet-6-calculation-tab-div"></div>').append($('<form class="add-window-price-sheet-6-calculation-quote-item-form '+l+'" action="./" method="POST"></form>').append('<input type="hidden" name="calc-name" class="calc-name" value="window_price_sheet_6">').append('<input type="hidden" class="cid" name="cid" value="'+cid+'">').append('<input type="hidden" class="window-price-sheet-6-calculation-code" name="window-price-sheet-6-calculation-code" value="'+n+'">').append($('<table class="window-price-sheet-6-calculation-table"></table>').append($('<thead class="thead"></thead>').append($('<tr class="thead-tr"></tr>').append(c).append(x).append(s).append("<th>Width</th>").append("<th>Height</th>").append(f).append(v).append(g).append(m).append(C).append('<th>\n                                                                            <table class="right-fixed-column">\n                                                                                <tr>\n                                                                                    <th>Price</th>\n                                                                                    <th>Qty</th>\n                                                                                    <th>Add</th>\n                                                                                </tr>\n                                                                            </table>\n                                                                        </th>'))).append($("<tbody></tbody>").append($('<tr class="tbody-tr"></tr>').append(d).append(q).append(p).append('<td><input type="number" name="width" data-column="width_x" class="window-price-sheet-6-calculation-width number-input data-field" maxlength="4" autocomplete="off" min="0" placeholder="mm"></td>').append('<td><input type="number" name="drop" data-column="drop_x" class="window-price-sheet-6-calculation-drop number-input data-field" maxlength="4" autocomplete="off" min="0" placeholder="mm"></td>').append(u).append(y).append(_).append(w).append(k).append('<td>\n                                                                            <table class="right-fixed-column" style="margin-top: -20px;">\n                                                                                <tr>\n                                                                                    <td><input type="tel" name="price" class="window-price-sheet-6-calculation-price price-input data-field" autocomplete="off"></td>\n                                                                                    <td><input type="number" name="qty" class="window-price-sheet-6-calculation-qty number-input" autocomplete="off" min="1" value="1"></td>\n                                                                                    <td><input type="submit" class="bttn-input" value="✚"></td>\n                                                                                </tr>\n                                                                            </table>\n                                                                        </td>')))).append(N).append(j).append(I)).prependTo("#window-price-sheet-6-calculation-tabs .calculation-results").find(".bttn-input").button()),"[]"!==JSON.stringify(o.quote_items)){$('<div id="window-price-sheet-6-calculation-quote-items-wrapper-'+n+'" class="window-price-sheet-6-calculation-quote-items-wrapper"></div>').append('<h2 class="window-price-sheet-6-calculation-header">'+o.name+"</h2>").append('<div id="quote-items-body-'+n+'" class="window-price-sheet-6-calculation-quote-items-body added-calcs" data-calc-code="window_price_sheet_6_calculation" data-calc-name="'+o.name+'"></div>').append('<div class="bulk-action-button-wrapper">\n                                            <input type="button" class="bulk-action-button window-price-sheet-6-calculation-select-all-bttn" value="✔">\n                                            <input type="button" class="bulk-action-button window-price-sheet-6-calculation-bulk-delete-bttn" value="Delete">\n                                            <input type="button" class="bulk-action-button window-price-sheet-6-calculation-bulk-copy-bttn" value="Copy">\n                                            <button class="fa-btn window-price-sheet-6-calculation-bulk-copy-quote-bttn copy-quote-bttn tltip bulk-action-button" style="padding-left:5px; padding-right:5px;" data-title="Copy Quote">Copy Quote</button>\n                                            <button class="fa-btn quote-item-sort-bttn tltip bulk-action-button" style="padding-left:5px; padding-right:5px;" data-calc-code="'+n+'" data-title="Move">Move<i class="fa fa-sort" aria-hidden="true"></i></button>\n                                            <a href="print/order-sheet-window-price-sheet-6-calculation-'+n+"-"+cid+'" target="_blank" class="bulk-action-button print-bttn" style="width: 135px;">Print Order Sheet</a>\n                                            <a href="https://file-gen.blinq.com.au/clients/'+user_account+"/order-sheet-xlsx-window-price-sheet-6-calculation-"+n+"-"+cid+'" target="_blank" class="bulk-action-button print-bttn" style="width: 165px;">Print Order Sheet Xlsx</a>\n                                            <form class="group-discount-form" style="float: right; margin-right: -6px; font-size: 12px;">\n                                                <input type="tel" class="group-total price-input ui-state-default" autocomplete="off" style="float: left;" disabled>\n                                                <input type="tel" class="group-discount price-input ui-state-default" autocomplete="off" placeholder="%" style="float: left; margin-left: 1px !important; margin-right: 1px !important; text-align: center; width: 33px;" required>\n                                                <input type="hidden" class="window-price-sheet-6-calculation-code" value="'+n+'">\n                                                <input type="submit" class="bttn-input ui-button ui-widget ui-state-default ui-corner-all" value="✔" role="button" aria-disabled="false" style="float: left;">\n                                            </form>\n                                            <div class="group-discount-total" style="float: right; line-height: 40px; margin-right: 300px; font-size: 22px; font-weight: bold;"></div>\n                                        </div>').prependTo("#window-price-sheet-6-calculation-quote-items-results").find(".bttn-input, .bulk-action-button").button();var F='<tr class="thead-tr">\n                                                <th class="left-fixed-column">#</th>\n                                                '+x+"                                                "+s+"                                                <th>Width</th>\n                                                <th>Height</th>\n                                                "+f+"                                                "+v+"                                                "+g+"                                                "+m+"                                                "+C+'                                                <th>\n                                                    <table class="right-fixed-column">\n                                                        <tr>\n                                                            <th>Price</th>\n                                                            <th>More</th>\n                                                            <th>Del</th>\n                                                        </tr>\n                                                    </table>\n                                                </th>\n                                            </tr>',z=1,D=0,E=0;$.each(o.quote_items,(function(e,t){var o=z;$('<form id="calculation-form-'+t.code+'" class="update-window-price-sheet-6-calculation-quote-item-form" action="./" method="POST">\n                                    <input type="hidden" name="calc-name" class="calc-name" value="window_price_sheet_6">\n                                    <input type="hidden" name="cid" class="cid" value="'+cid+'">\n                                    <input type="hidden" name="window-price-sheet-6-calculation-code" class="window-price-sheet-6-calculation-code" value="'+n+'">\n                                    <input type="hidden" name="window-price-sheet-6-calculation-quote-item-code" class="window-price-sheet-6-calculation-quote-item-code" value="'+t.code+'">\n                                    <table class="window-price-sheet-6-calculation-table row_item_table">\n                                        <thead class="thead"></thead>\n                                        <tbody>\n                                            <tr>\n                                                <td class="left-fixed-column">\n                                                    <label class="checkbox-label" for="checkbox-'+t.code+'">'+o+'</label>\n                                                    <input type="checkbox" id="checkbox-'+t.code+'"class="checkbox-input" name="quote-item-codes[]" value="'+t.code+'">\n                                                    <input type="hidden" class="quote-item-row-no" name="quote-item-row-no[]" value="'+t.row_no+'">\n                                                </td>\n                                                '+q+"                                                "+p+'                                                <td><input type="number" name="width" data-column="width_x" class="window-price-sheet-6-calculation-width number-input data-field" maxlength="4" autocomplete="off" min="0" value="'+t.width+'" placeholder="mm"></td>\n                                                <td><input type="number" name="drop" data-column="drop_x" class="window-price-sheet-6-calculation-drop number-input data-field" maxlength="4" autocomplete="off" min="0" value="'+t.drop+'" placeholder="mm"></td>\n                                                '+u+"                                                "+y+"                                                "+_+"                                                "+w+"                                                "+k+'                                                <td>\n                                                    <table class="right-fixed-column" style="margin-top: -20px;">\n                                                        <tr>\n                                                            <td><input type="tel" name="price" data-column="price" class="window-price-sheet-6-calculation-price price-input data-field ui-state-default" autocomplete="off" value="'+t.price+'"></td>\n                                                            <td><input type="button" class="window-price-sheet-6-calculation-table-more-bttn bttn-input" value="★"></td>\n                                                            <td><input type="button" class="bttn-input delete-window-price-sheet-6-calculation-quote-item" value="✖"></td>\n                                                        </tr>\n                                                    </table>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                    <table id="calculation-table-more-'+t.code+'"  class="window-price-sheet-6-calculation-table-more">\n                                        <tr>\n                                            <td class="table-more-notes" colspan="3">\n                                                <textarea name="notes" data-column="notes" class="window-price-sheet-6-calculation-notes data-field" placeholder="Notes">'+t.notes+'</textarea>\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="table-more-accessories">\n                                                '+S+'                                            </td>\n                                            <td class="table-more-per-meters">\n                                                '+T+'                                            </td>\n                                            <td class="table-more-fitting-charges">\n                                                '+P+"                                            </td>\n                                        </tr>\n                                    </table>\n                                </form>").appendTo("#quote-items-body-"+n).queue((function(){var e=$(this);e.find("[name='location']").val(t.location),e.find("[name='fullness']").val(t.fullness),e.find("[name='type']").val(t.type).queue((function(){a(this),$(this).dequeue()})),e.find("[name='material']").val(t.material).queue((function(){i(this),$(this).dequeue()})),e.find("[name='colour']").val(t.colour),"1"===quote_status&&e.find(".approved-disabled").css({"pointer-events":"none",background:"#f2f2f2"}),$.each(t.fields,(function(t,a){var i=a.code,o=a.name,n=a.price,l=a.window_price_sheet_6_calculation_field_code;e.find("[name='field["+l+"]']").is("input")?e.find("[name='field["+l+"]']").val(o):e.find("[name='field["+l+"]']").val(o+"<->"+i+"<->"+n)})),$.each(t.accessories,(function(t,a){var i=a.code,o=a.name,n=+a.price,l=+a.qty,c=(n*l).toFixed(2);e.find(".table-more-accessories").append('<span class="window-price-sheet-6-calculation-accessories-wrapper">\n                                                                                            <input type="text" class="window-price-sheet-6-calculation-accessory" readonly disabled value="'+o+" | "+n+" x "+l+" = "+c+'">\n                                                                                            <input type="button" class="delete-window-price-sheet-6-calculation-accessory bttn-input" data-code="'+i+'" value="✖">\n                                                                                        </span>')})),$.each(t.per_meters,(function(t,a){var i=a.code,o=a.name,n=+a.price,l=+a.width,c=(n*l).toFixed(2);e.find(".table-more-per-meters").append('<span class="window-price-sheet-6-calculation-per-meters-wrapper">\n                                                                                            <input type="text" class="window-price-sheet-6-calculation-per-meter" readonly disabled value="'+o+" | "+n+" x "+l+" = "+c+'">\n                                                                                            <input type="button" class="delete-window-price-sheet-6-calculation-per-meter bttn-input" data-code="'+i+'" value="✖">\n                                                                                        </span>'),e.find('.window-price-sheet-6-calculation-per-meters option[data-code="'+i+'"]').hide()})),$.each(t.fitting_charges,(function(t,a){var i=a.code,o=a.name,n=a.price;e.find(".table-more-fitting-charges").append('<span class="window-price-sheet-6-calculation-fitting-charges-wrapper">\n                                                                                                <input type="text" class="window-price-sheet-6-calculation-fitting-charge" readonly disabled value="'+o+" | "+n+'">\n                                                                                                <input type="button" class="delete-window-price-sheet-6-calculation-fitting-charge bttn-input" data-code="'+i+'" value="✖">\n                                                                                            </span>'),e.find('.window-price-sheet-6-calculation-fitting-charges option[data-code="'+i+'"]').hide()}));var o=t.notes,n=e.find(".window-price-sheet-6-calculation-accessory").length,l=e.find(".window-price-sheet-6-calculation-per-meter").length,c=e.find(".window-price-sheet-6-calculation-fitting-charge").length;o||n||l||c?e.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):e.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),z++,D=+D+ +t.price,E=t.discount,e.find(".bttn-input, .checkbox-input").button(),e.dequeue()})).clearQueue().html()})),$("#window-price-sheet-6-calculation-quote-items-wrapper-"+n).find(".group-total").val(D.toFixed(2)).end().find(".group-discount").val(E).end().find(".group-discount-total").html((D-D*E/100).toFixed(2)),$(".window-price-sheet-6-calculation-quote-items-body .window-price-sheet-6-calculation-table .thead").first().html(F)}else $('<div id="window-price-sheet-6-calculation-quote-items-wrapper-'+n+'" class="window-price-sheet-6-calculation-quote-items-wrapper"></div>').append('<h2 class="window-price-sheet-6-calculation-header">'+o.name+"</h2>").append('<div id="quote-items-body-'+n+'" class="window-price-sheet-6-calculation-quote-items-body added-calcs" data-calc-code="window_price_sheet_6_calculation" data-calc-name="'+o.name+'"></div>').append('<div class="bulk-action-button-wrapper"></div>').prependTo("#window-price-sheet-6-calculation-quote-items-results").hide()})),$(".tabs").tabs("refresh").tabs("option","active",0)):alert(JSON.stringify(e))},error:function(e,t,a){alert(JSON.stringify(e))}}),$(document).on("click",".window-price-sheet-6-calculation-select-all-bttn",(function(){var e=$(this),t=e.val(),a=e.parents(".window-price-sheet-6-calculation-quote-items-wrapper");"✔"===t?(a.find(".checkbox-input").prop("checked",!0).change().button("refresh"),e.val("✖")):(a.find(".checkbox-input").prop("checked",!1).change().button("refresh"),e.val("✔"))})),$(document).on("click",".window-price-sheet-6-calculation-bulk-delete-bttn",(function(){var e=$(this),t=e.parents(".window-price-sheet-6-calculation-quote-items-wrapper"),a=t.find(".window-price-sheet-6-calculation-table .thead .thead-tr").clone(),i=t.find(".checkbox-input:checked"),o=i.serialize();confirm("Are you sure you want to delete this item?")&&o&&$.ajax({url:"window-price-sheet-6-calculation/scripts/delete-bulk-window-price-sheet-6-calculation-quote-items.php",type:"POST",dataType:"json",data:o+"&cid="+cid,beforeSend:function(){e.prop("disabled",!1).addClass("field-loader")},success:function(o){4===o[0]?document.location.replace(o[1]):2===o[0]?(e.prop("disabled",!1).removeClass("field-loader"),alert(o[1])):1===o[0]?($.each(i.serializeArray(),(function(e,t){$("#calculation-form-"+t.value).remove()})),t.find(".update-window-price-sheet-6-calculation-quote-item-form").length?(t.find(".checkbox-label").each((function(e){$(this).find(".ui-button-text").html(e+1)})),t.find(".window-price-sheet-6-calculation-table .thead").first().html(a)):t.hide().find(".bulk-action-button-wrapper").empty(),e.prop("disabled",!1).removeClass("field-loader"),l(e),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")):(e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(o)))},error:function(t,a,i){e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @delete-bulk-window-price-sheet-6-calculation-quote-item")}})})),$(document).on("click",".window-price-sheet-6-calculation-bulk-copy-bttn",(function(){var e=$(this),t=e.parents(".window-price-sheet-6-calculation-quote-items-wrapper"),a=t.find(".checkbox-input:checked").serialize(),i=e.siblings(".group-discount-form").find(".window-price-sheet-6-calculation-code").val(),o=-1/0;$(document).find("#quote-items-body-"+i).find(".quote-item-row-no").each((function(){o=Math.max(o,parseFloat(this.value))}));var n=o+1;confirm("Are you sure you want to copy this item?")&&a&&$.ajax({url:"window-price-sheet-6-calculation/scripts/copy-bulk-window-price-sheet-6-calculation-quote-items.php",type:"POST",dataType:"json",data:a+"&cid="+cid,beforeSend:function(){e.prop("disabled",!1).addClass("field-loader")},success:function(a){4===a[0]?document.location.replace(a[1]):2===a[0]?(e.prop("disabled",!1).removeClass("field-loader"),alert(a[1])):1===a[0]?($.each(a[1],(function(e,a){var i=$("#calculation-form-"+e).clone();i.attr("id","calculation-form-"+a),i.find(".window-price-sheet-6-calculation-quote-item-code").val(a),i.find(".checkbox-label").attr("for","checkbox-"+a).html(n),i.find(".checkbox-input").attr("id","checkbox-"+a).val(a),i.find(".checkbox-input").button(),i.find(".quote-item-row-no").val(n),i.find(".window-price-sheet-6-calculation-table-more").attr("id","calculation-table-more-"+a).hide(),i.find(".window-price-sheet-6-calculation-table .thead").empty(),n++,$(i).appendTo(t.find(".window-price-sheet-6-calculation-quote-items-body")).queue((function(){var t=$(this),a=$("#calculation-form-"+e);$.each(a.serializeArray(),(function(e,a){t.find(".data-field[name='"+a.name+"']").val(a.value)})),t.dequeue()})).clearQueue()})),e.prop("disabled",!1).removeClass("field-loader"),l(e),quote_item_sort(i,!0)):(e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(a)))},error:function(t,a,i){e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @copy-bulk-window-price-sheet-6-calculation-quote-item")}})})),$(document).on("click",".delete-window-price-sheet-6-calculation-quote-item",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),i=t.parents(".window-price-sheet-6-calculation-quote-items-wrapper"),o=i.find(".window-price-sheet-6-calculation-table .thead .thead-tr").clone();confirm("Are you sure you want to delete this item?")&&$.ajax({url:"window-price-sheet-6-calculation/scripts/delete-window-price-sheet-6-calculation-quote-item.php",type:"POST",dataType:"json",data:{cid:cid,code:a},beforeSend:function(){e.prop("disabled",!0).addClass("field-loader")},success:function(a){4===a[0]?document.location.replace(a[1]):2===a[0]?(e.prop("disabled",!1).removeClass("field-loader"),alert(a[1])):1===a[0]?(t.hide(),i.find(".window-price-sheet-6-calculation-table .thead").first().html(o),e.prop("disabled",!1).removeClass("field-loader"),l(t),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast"),t.remove(),i.find(".update-window-price-sheet-6-calculation-quote-item-form").length?i.find(".checkbox-label").each((function(e){$(this).find(".ui-button-text").html(e+1)})):i.hide().find(".bulk-action-button-wrapper").empty()):(e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(a)))},error:function(t,a,i){e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @delete-window-price-sheet-6-calculation-quote-item")}})})),$(document).on("click",".window-price-sheet-6-calculation-table-more-bttn",(function(){$(this).parents("form").find(".window-price-sheet-6-calculation-table-more").toggle("slide",{direction:"up"},"fast")})),$(document).on("change",".add-window-price-sheet-6-calculation-quote-item-form .window-price-sheet-6-calculation-width,\n                                .add-window-price-sheet-6-calculation-quote-item-form .window-price-sheet-6-calculation-drop,\n                                .add-window-price-sheet-6-calculation-quote-item-form .window-price-sheet-6-calculation-type,\n                                .add-window-price-sheet-6-calculation-quote-item-form .window-price-sheet-6-calculation-field",(function(){!function(e){var t=$(e).parents("form"),a=t.find(".window-price-sheet-6-calculation-width"),i=t.find(".window-price-sheet-6-calculation-drop"),o=t.find(".window-price-sheet-6-calculation-type");if(a.tooltip(),i.tooltip(),o.val()){var n=JSON.parse(o.find("option:selected").attr("data-min-max-dimensions")),l=n.max_width,c=n.max_drop,d=a.val(),s=i.val();if(l<d){var r="Max Width: "+l;a.attr("title",r).addClass("tooltip-active").tooltip({content:r,tooltipClass:"min_max_dimensions",position:{my:"center top+7",at:"center bottom",collision:"flipfit"},show:{effect:"bounce",delay:1}}).tooltip("close").tooltip("open").off("mouseout mouseover focusout mouseleave"),i.tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active")}else if(c<s){r="Max Height: "+c;i.attr("title",r).addClass("tooltip-active").tooltip({content:r,tooltipClass:"min_max_dimensions",position:{my:"center top+7",at:"center bottom",collision:"flipfit"},show:{effect:"bounce",delay:1}}).tooltip("close").tooltip("open").off("mouseout mouseover focusout mouseleave"),a.tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active")}else i.tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active"),a.tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active")}else i.tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active"),a.tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active")}(this),t(this)}));var e=$.ajax();function t(t){var a=$(t).parents("form"),i=a.find(".window-price-sheet-6-calculation-price"),o=a.find(".window-price-sheet-6-calculation-field"),n=a.find(".window-price-sheet-6-calculation-code").val(),l=a.find(".window-price-sheet-6-calculation-type").val().split("<->")[1],c=a.find(".window-price-sheet-6-calculation-width").val(),d=a.find(".window-price-sheet-6-calculation-drop").val();n&&l&&c&&d&&(e=$.ajax({url:"window-price-sheet-6-calculation/scripts/get-window-price-sheet-6-calculation-price.php",type:"POST",dataType:"json",data:{width:c,drop:d,type_code:l,code:n},success:function(e){var t=0;$.each(o,(function(){var e=$(this).val().split("<->")[2];t+=e>0?+e:0}));var a=(t+=+e).toFixed(2);if(i.val(a),0===t){var n="No Price Available";i.attr("title",n).addClass("tooltip-active").tooltip({content:n,tooltipClass:"min_max_dimensions",position:{my:"center top+7",at:"center bottom",collision:"flipfit"},show:{effect:"bounce",delay:1}}).tooltip("close").tooltip("open").off("mouseout mouseover focusout mouseleave")}else i.tooltip().tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active")},error:function(e,t,a){alert("Error! @get-window-price-sheet-6-calculation-price")}}))}function a(e){var t=$(e).parents("form"),a=+t.find(".window-price-sheet-6-calculation-width").val(),i=t.find(".window-price-sheet-6-calculation-material");i.val(""),i.find("option").not(":first").remove();var o=t.find(".window-price-sheet-6-calculation-colour");o.val(""),o.find("option").not(":first").remove();var n=t.find(".window-price-sheet-6-calculation-type").find("option:selected").attr("data-materials-and-colours");n&&$.each(JSON.parse(n),(function(e,t){var o=+t.max_width,n=JSON.stringify(t.colours);o>=a&&i.append('<option value="'+t.name+"<->"+t.code+'" data-code="'+t.code+"\" data-colours='"+n+"'>"+t.name+"</option>")}))}function i(e){var t=$(e).parents("form"),a=t.find(".window-price-sheet-6-calculation-colour");a.val(""),a.find("option").not(":first").remove();var i=t.find(".window-price-sheet-6-calculation-type option:selected").attr("data-code"),o=$(e).find("option:selected").attr("data-code"),n=$(e).find("option:selected").attr("data-colours");n&&($.each(JSON.parse(n),(function(e,t){a.append('<option value="'+t.name+"<->"+t.code+'">'+t.name+"</option>")})),a.append('<option class="window-price-sheet-6-calculation-add-colour-option" data-material-code="'+o+'" data-type-code="'+i+'" value="add-new">Add New</option>'))}function o(e,t,a,i){var o=$(i).parents("form"),n=o.find(".window-price-sheet-6-calculation-type"),l=o.find(".window-price-sheet-6-calculation-material"),c=o.find(".window-price-sheet-6-calculation-colour"),d=o.find(".window-price-sheet-6-calculation-add-colour-wrapper"),s=o.find(".window-price-sheet-6-calculation-add-colour"),r=o.find(".window-price-sheet-6-calculation-add-colour-submit"),p=o.find(".data-field, .number-input, select, [type='submit']"),u=(e=e,t=t,a=a,JSON.parse(n.find("option:selected").attr("data-materials-and-colours"))),f=JSON.parse(l.find("option:selected").attr("data-colours"));t&&a&&$.ajax({url:"window-price-sheet-6-calculation/scripts/add-window-price-sheet-6-calculation-colour.php",type:"POST",dataType:"json",data:{material_code:t,colour_name:a},beforeSend:function(){s.prop("disabled",!0).addClass("field-loader"),r.prop("disabled",!0).addClass("field-loader")},success:function(a){4===a[0]?document.location.replace(a[1]):2===a[0]?alert(a[1]):1===a[0]?($.each(u,(function(i,o){o.code===t&&(o.colours.push({code:a[1],name:a[2]}),u.colours=o.colours,$(".window-price-sheet-6-calculation-type option[data-code="+e+"]").attr("data-materials-and-colours",JSON.stringify(u)))})),f.push({code:a[1],name:a[2]}),$(".window-price-sheet-6-calculation-material option[data-code="+t+"]").attr("data-colours",JSON.stringify(f)),$(".window-price-sheet-6-calculation-add-colour-option[data-material-code="+t+"][data-type-code="+e+"]").before('<option value="'+a[2]+"<->"+a[1]+'">'+a[2]+"</option>"),s.removeAttr("data-material-code").val(""),d.hide(),p.prop("disabled",!1),c.show().val(a[2]+"<->"+a[1]).change()):alert(a),s.prop("disabled",!1).removeClass("field-loader"),r.prop("disabled",!1).removeClass("field-loader")},error:function(e,t,a){s.prop("disabled",!1).removeClass("field-loader"),r.prop("disabled",!1).removeClass("field-loader")}})}function n(e,t){var a=$(t),i=a.parents("form"),o=a.parents(".window-price-sheet-6-calculation-add-field-option-wrapper"),n=o.find(".window-price-sheet-6-calculation-add-field-option"),l=o.find(".window-price-sheet-6-calculation-add-field-option-submit"),c=o.siblings(".window-price-sheet-6-calculation-field"),d=c.attr("data-code"),s=i.find(".window-price-sheet-6-calculation-code").val(),r=i.find(".data-field, .number-input, select, [type='submit']");(e=e)&&$.ajax({url:"window-price-sheet-6-calculation/scripts/add-window-price-sheet-6-calculation-field-option.php",type:"POST",dataType:"json",data:{field_code:d,field_option_name:e,window_price_sheet_6_calculation_code:s},beforeSend:function(){n.prop("disabled",!0).addClass("field-loader"),l.prop("disabled",!0).addClass("field-loader")},success:function(e){if(4===e[0])document.location.replace(e[1]);else if(2===e[0])alert(e[1]);else if(1===e[0]){$(".window-price-sheet-6-calculation-add-field-option-x[data-field-code="+d+"]").before('<option value="'+e[2]+"<->"+e[1]+'<->0.00">'+e[2]+"</option>");var t=i.find(".checkbox-input"),a=i.parents(".window-price-sheet-6-calculation-quote-items-body").find(".checkbox-input:checked");t.is(":checked")&&a.length&&a.not(t).each((function(){$(this).parents(".update-window-price-sheet-6-calculation-quote-item-form").find(".data-field, .number-input, select, [type='submit']").prop("disabled",!1)})),n.val(""),o.hide(),r.prop("disabled",!1),c.show().val(e[2]+"<->"+e[1]+"<->0.00").change()}else alert(e);n.prop("disabled",!1).removeClass("field-loader"),l.prop("disabled",!1).removeClass("field-loader")},error:function(e,t,a){n.prop("disabled",!1).removeClass("field-loader"),l.prop("disabled",!1).removeClass("field-loader")}})}function l(e){var t=$(e).parents(".window-price-sheet-6-calculation-quote-items-wrapper"),a=t.find(".window-price-sheet-6-calculation-quote-items-body").find("input[name='price']:not(:hidden)"),i=$.isNumeric(+t.find(".group-discount").val())?+t.find(".group-discount").val():0,o=0;a.each((function(){o+=Number($(this).val().replace(/,/g,""))}));var n=o-o*i/100;t.find(".group-total").val(o.toFixed(2)).end().find(".group-discount").val(i).end().find(".group-discount-total").html(n.toFixed(2)).end().find(".group-discount-form").submit()}function c(e,t){var a=$(e);if("add-new"===a.val())return!1;var i=a.parents(".update-window-price-sheet-6-calculation-quote-item-form"),o=i.find(".checkbox-input"),n=i.parents(".window-price-sheet-6-calculation-quote-items-body").find(".checkbox-input:checked");$.ajax({url:"window-price-sheet-6-calculation/scripts/update-window-price-sheet-6-calculation-quote-item.php",type:"POST",dataType:"json",data:{quote_items_array:t},beforeSend:function(){},success:function(e){if(4===e[0])document.location.replace(e[1]);else if(2===e[0])a.removeClass("field-loader"),alert(e[1]);else if(1===e[0]){if(o.is(":checked")&&n.length)n.each((function(){var e=$(this).parents(".update-window-price-sheet-6-calculation-quote-item-form"),t=e.find(".window-price-sheet-6-calculation-notes").val().length,a=e.find(".window-price-sheet-6-calculation-accessory").length,i=e.find(".window-price-sheet-6-calculation-per-meter").length,o=e.find(".window-price-sheet-6-calculation-fitting-charge").length;t||a||i||o?e.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):e.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red")}));else{var t=i.find(".window-price-sheet-6-calculation-notes").val().length,c=i.find(".window-price-sheet-6-calculation-accessory").length,d=i.find(".window-price-sheet-6-calculation-per-meter").length,s=i.find(".window-price-sheet-6-calculation-fitting-charge").length;t||c||d||s?i.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):i.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red")}a.removeClass("field-loader"),l(i)}else a.removeClass("field-loader"),alert(JSON.stringify(e))},error:function(e,t,i){a.removeClass("field-loader"),alert(JSON.stringify(e)),alert("Error! @update-window-price-sheet-6-calculation-quote-item")}})}$(document).on("change",".window-price-sheet-6-calculation-width, .window-price-sheet-6-calculation-type",(function(){("1"!==quote_status||$(this).parents("form").hasClass("add-window-price-sheet-6-calculation-quote-item-form"))&&a(this)})),$(document).on("change",".window-price-sheet-6-calculation-material",(function(){("1"!==quote_status||$(this).parents("form").hasClass("add-window-price-sheet-6-calculation-quote-item-form"))&&i(this)})),$(document).on("change",".window-price-sheet-6-calculation-colour",(function(e){var t=$(this),a=t.parents("form"),i=a.find(".window-price-sheet-6-calculation-add-colour-wrapper"),o=a.find(".window-price-sheet-6-calculation-add-colour"),n=a.find(".data-field, .number-input, select, [type='submit']"),l=t.find("option:selected").attr("data-type-code"),c=t.find("option:selected").attr("data-material-code");l&&c&&(t.toggle(),i.toggle(),o.attr({"data-material-code":c,"data-type-code":l}).focus(),n.prop("disabled",!0))})),$(document).on("keypress",".window-price-sheet-6-calculation-add-colour",(function(e){if(13===e.keyCode){e.preventDefault();var t=$(this),a=t.parents("form").find(".window-price-sheet-6-calculation-add-colour");return o(a.attr("data-type-code"),a.attr("data-material-code"),a.val(),t),!1}})),$(document).on("click",".window-price-sheet-6-calculation-add-colour-submit",(function(e){e.preventDefault();var t=$(this),a=t.parents("form").find(".window-price-sheet-6-calculation-add-colour");return o(a.attr("data-type-code"),a.attr("data-material-code"),a.val(),t),!1})),$(document).on("click",".window-price-sheet-6-calculation-add-colour-close",(function(){var e=$(this).parents("form"),t=e.find(".window-price-sheet-6-calculation-colour"),a=e.find(".window-price-sheet-6-calculation-add-colour-wrapper"),i=e.find(".window-price-sheet-6-calculation-add-colour"),o=e.find(".data-field, .number-input, select, [type='submit']");t.toggle().val("").change(),a.toggle(),i.removeAttr("data-material-code").val(""),o.prop("disabled",!1)})),$(document).on("change",".window-price-sheet-6-calculation-field",(function(e){var t=$(this),a=t.parents("form"),i=t.siblings(".window-price-sheet-6-calculation-add-field-option-wrapper"),o=i.find(".window-price-sheet-6-calculation-add-field-option"),n=a.find(".data-field, .number-input, select, [type='submit']"),l=a.find(".checkbox-input"),c=a.parents(".window-price-sheet-6-calculation-quote-items-body").find(".checkbox-input:checked");l.is(":checked")&&c.length&&c.not(l).each((function(){var e=$(this).parents(".update-window-price-sheet-6-calculation-quote-item-form").find(".data-field, .number-input, select, [type='submit']");"add-new"===t.val()&&e.prop("disabled",!0)})),"add-new"===t.val()&&(t.hide(),i.show(),o.focus(),n.prop("disabled",!0))})),$(document).on("keypress",".window-price-sheet-6-calculation-add-field-option",(function(e){if(13===e.keyCode){e.preventDefault();var t=$(this);return n(t.parents(".window-price-sheet-6-calculation-add-field-option-wrapper").find(".window-price-sheet-6-calculation-add-field-option").val(),t),!1}})),$(document).on("click",".window-price-sheet-6-calculation-add-field-option-submit",(function(e){e.preventDefault();var t=$(this);return n(t.siblings(".window-price-sheet-6-calculation-add-field-option").val(),t),!1})),$(document).on("click",".window-price-sheet-6-calculation-add-field-option-close",(function(){var e=$(this),t=e.parents("form"),a=e.parents(".window-price-sheet-6-calculation-add-field-option-wrapper"),i=a.find(".window-price-sheet-6-calculation-add-field-option"),o=a.siblings(".window-price-sheet-6-calculation-field"),n=t.find(".data-field, .number-input, select, [type='submit']"),l=t.find(".checkbox-input"),c=t.parents(".window-price-sheet-6-calculation-quote-items-body").find(".checkbox-input:checked");l.is(":checked")&&c.length&&c.not(l).each((function(){$(this).parents(".update-window-price-sheet-6-calculation-quote-item-form").find(".data-field, .number-input, select, [type='submit']").prop("disabled",!1)})),i.val(""),a.hide(),n.prop("disabled",!1),o.show().val("").change().focus()})),$(document).on("submit",".add-window-price-sheet-6-calculation-quote-item-form",(function(e){e.preventDefault();var t=$(this),a=t.find('[type="submit"]'),i=t.find(".window-price-sheet-6-calculation-table .thead-tr"),o=t.find(".window-price-sheet-6-calculation-table .tbody-tr"),n=t.find(".window-price-sheet-6-calculation-code").val(),c=t.find(".accessory-option-array").val(),d=t.find(".per-meter-option-array").val(),s=t.find(".fitting-charge-option-array").val(),r=$("#window-price-sheet-6-calculation-quote-items-wrapper-"+n),p=$.isNumeric(+r.find(".group-discount").val())?+r.find(".group-discount").val():0;if(4===user_type){var u=$("ul.main-calculations li.ui-tabs-active a.ui-tabs-anchor").attr("data-calc-code");r.find(".update-window-price-sheet-6-calculation-quote-item-form").length||(p=trader_calcs.find((e=>e.code===u)).discount)}var f=t.serialize(),h=-1/0;$(document).find("#quote-items-body-"+n).find(".quote-item-row-no").each((function(){h=Math.max(h,parseFloat(this.value))}));var w=h==-1/0?1:h+1;$.ajax({url:"window-price-sheet-6-calculation/scripts/add-window-price-sheet-6-calculation-quote-item.php",type:"POST",dataType:"json",data:f,beforeSend:function(e){a.prop("disabled",!1).addClass("field-loader")},success:function(e){4===e[0]?document.location.replace(e[1]):2===e[0]?(a.prop("disabled",!1).removeClass("field-loader"),alert(e[1])):1===e[0]?($(t).find(".tooltip-active").tooltip().tooltip("close").tooltip("destroy").removeAttr("title").removeClass("tooltip-active"),$(t).find(".data-field:first").focus(),$.each(e[1],(function(e,a){if($("#quote-items-body-"+n+" .window-price-sheet-6-calculation-table").length)r="";else{var l=i.clone();l.prepend('<th class="left-fixed-column">#</th>'),l.find(".right-fixed-column").html("<tr>\n                                                                                    <th>Price</th>\n                                                                                    <th>More</th>\n                                                                                    <th>Del</th>\n                                                                                </tr>"),"on"===etape&&l.find(".etape-th").remove();var r=l.html();$("#window-price-sheet-6-calculation-quote-items-wrapper-"+n).show()}var p=o.clone();if(p.prepend('<td class="left-fixed-column">\n                                <label class="checkbox-label" for="checkbox-'+a+'">'+w+'</label>\n                                <input type="checkbox" id="checkbox-'+a+'" class="checkbox-input" name="quote-item-codes[]" value="'+a+'">\n                                <input type="hidden" class="quote-item-row-no" name="quote-item-row-no[]" value="'+w+'">\n                            </td>'),p.find(".right-fixed-column").html('<tr>\n                                                                                <td><input type="tel" name="price" data-column="price" class="window-price-sheet-6-calculation-price price-input data-field ui-state-default" autocomplete="off"></td>\n                                                                                <td><input type="button" class="window-price-sheet-6-calculation-table-more-bttn bttn-input" value="★"></td>\n                                                                                <td><input type="button" class="bttn-input delete-window-price-sheet-6-calculation-quote-item" value="✖"></td>\n                                                                            </tr>'),"1"===quote_status&&p.find(".approved-disabled").css({"pointer-events":"none",background:"#f2f2f2"}),"on"===etape&&p.find(".etape-td").remove(),c){var u="",f="";$.each(JSON.parse(c),(function(e,t){f+='<option data-code="'+t.code+'" value="'+t.code+"<->"+t.name+"<->"+t.price+'">'+t.name+" | "+t.price+"</option>"})),u='<span class="window-price-sheet-6-calculation-accessories-wrapper">\n                                                    <select class="window-price-sheet-6-calculation-accessories">\n                                                        <option value="">Accessories</option>\n                                                        '+f+'                                                    </select>\n                                                    <input type="tel" class="add-window-price-sheet-6-calculation-accessory-mm qty-input" placeholder="mm">\n                                                    <input type="tel" class="add-window-price-sheet-6-calculation-accessory-qty qty-input" placeholder="Qty">\n                                                    <input type="button" class="add-window-price-sheet-6-calculation-accessories bttn-input" value="✚">\n                                                </span>'}else u="";if(d){var h="",m="";$.each(JSON.parse(d),(function(e,t){m+='<option data-code="'+t.code+'" value="'+t.code+"<->"+t.name+"<->"+t.price+'">'+t.name+" | "+t.price+"</option>"})),h='<span class="window-price-sheet-6-calculation-per-meters-wrapper">\n                                                    <select class="window-price-sheet-6-calculation-per-meters">\n                                                        <option value="">Per Meters</option>\n                                                        '+m+'                                                    </select>\n                                                    <input type="tel" class="add-window-price-sheet-6-calculation-per-meter-width qty-input" placeholder="Width">\n                                                    <input type="button" class="add-window-price-sheet-6-calculation-per-meters bttn-input" value="✚">\n                                                </span>'}else h="";if(s){var b="",v="";$.each(JSON.parse(s),(function(e,t){v+='<option data-code="'+t.code+'" value="'+t.code+"<->"+t.name+"<->"+t.price+'">'+t.name+" | "+t.price+"</option>"})),b='<span class="window-price-sheet-6-calculation-fitting-charges-wrapper">\n                                                        <select class="window-price-sheet-6-calculation-fitting-charges">\n                                                            <option value="">Fitting Charges</option>\n                                                            '+v+'                                                        </select>\n                                                        <input type="button" class="add-window-price-sheet-6-calculation-fitting-charges bttn-input" value="✚">\n                                                    </span>'}else b="";$('<form id="calculation-form-'+a+'" class="update-window-price-sheet-6-calculation-quote-item-form" action="./" method="POST">\n                                <input type="hidden" name="calc-name" class="calc-name" value="window_price_sheet_6">\n                                <input type="hidden" name="cid" class="cid" value="'+cid+'">\n                                <input type="hidden" name="window-price-sheet-6-calculation-code" class="window-price-sheet-6-calculation-code" value="'+n+'">\n                                <input type="hidden" name="window-price-sheet-6-calculation-quote-item-code" class="window-price-sheet-6-calculation-quote-item-code" value="'+a+'">\n                                <table class="window-price-sheet-6-calculation-table row_item_table">\n                                    <thead class="thead">\n                                        <tr class="thead-tr">'+r+"</tr>\n                                    </thead>\n                                    <tbody>\n                                        "+p.html()+'                                    </tbody>\n                                </table>\n                                <table id="calculation-table-more-'+a+'"  class="window-price-sheet-6-calculation-table-more">\n                                    <tr>\n                                        <td class="table-more-notes" colspan="3">\n                                            <textarea name="notes" data-column="notes" class="window-price-sheet-6-calculation-notes data-field" placeholder="Notes"></textarea>\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td class="table-more-accessories">\n                                            '+u+'                                        </td>\n                                        <td class="table-more-per-meters">\n                                            '+h+'                                        </td>\n                                        <td class="table-more-fitting-charges">\n                                            '+b+"                                        </td>\n                                    </tr>\n                                </table>\n                            </form>").appendTo("#quote-items-body-"+n).queue((function(){var e=$(this);$.each(t.serializeArray(),(function(t,a){e.find("[name='"+a.name+"']").val(a.value)})),e.find(".bttn-input, .checkbox-input").button(),e.dequeue()})).clearQueue(),w++})),r.find(".bulk-action-button-wrapper").html('<input type="button" class="bulk-action-button window-price-sheet-6-calculation-select-all-bttn" value="✔">\n                                                                            <input type="button" class="bulk-action-button window-price-sheet-6-calculation-bulk-delete-bttn" value="Delete">\n                                                                            <input type="button" class="bulk-action-button window-price-sheet-6-calculation-bulk-copy-bttn" value="Copy">\n                                                                            <button class="fa-btn window-price-sheet-6-calculation-bulk-copy-quote-bttn copy-quote-bttn tltip bulk-action-button" style="padding-left:5px; padding-right:5px;" data-title="Copy Quote">Copy Quote</button>\n                                                                            <button class="fa-btn quote-item-sort-bttn tltip bulk-action-button" style="padding-left:5px; padding-right:5px;" data-calc-code="'+n+'" data-title="Move">Move<i class="fa fa-sort" aria-hidden="true"></i></button>\n                                                                            <a href="print/order-sheet-window-price-sheet-6-calculation-'+n+"-"+cid+'" target="_blank" class="bulk-action-button print-bttn" style="width: 135px;">Print Order Sheet</a>\n                                                                            <a href="https://file-gen.blinq.com.au/clients/'+user_account+"/order-sheet-xlsx-window-price-sheet-6-calculation-"+n+"-"+cid+'" target="_blank" class="bulk-action-button print-bttn" style="width: 165px;">Print Order Sheet Xlsx</a>\n                                                                            <form class="group-discount-form" style="float: right; margin-right: -6px; font-size: 12px;">\n                                                                                <input type="tel" class="group-total price-input ui-state-default" autocomplete="off" style="float: left;" disabled value="">\n                                                                                <input type="tel" class="group-discount price-input ui-state-default" autocomplete="off" placeholder="%" value="'+p+'" style="float: left; margin-left: 1px !important; margin-right: 1px !important; text-align: center; width: 33px;" required value="">\n                                                                                <input type="hidden" class="window-price-sheet-6-calculation-code" value="'+n+'">\n                                                                                <input type="submit" class="bttn-input ui-button ui-widget ui-state-default ui-corner-all" value="✔" role="button" aria-disabled="false" style="float: left;">\n                                                                            </form>\n                                                                            <div class="group-discount-total" style="float: right; line-height: 40px; margin-right: 300px; font-size: 22px; font-weight: bold;"></div>\n                                                                        ').find(".bulk-action-button").button(),r.find(".checkbox-label").each((function(e){$(this).find(".ui-button-text").html(e+1)})),quote_item_sort(n,!0),t[0].reset(),t.find(".window-price-sheet-6-calculation-material").val("").find("option").not(":first").remove(),t.find(".window-price-sheet-6-calculation-colour").val("").find("option").not(":first").remove(),a.prop("disabled",!1).removeClass("field-loader"),l(r.find(".group-discount-form"))):(a.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(e)))},error:function(e,t,i){a.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(e)),alert("Error! @add-window-price-sheet-6-calculation-quote-item")}})})),$(document).on("change",".update-window-price-sheet-6-calculation-quote-item-form .data-field",(function(o){o.preventDefault();var n=$(this),l=n.attr("name"),d=n.val();if("add-new"===d)return!1;n.toggleClass("field-loader");var s=n.parents(".update-window-price-sheet-6-calculation-quote-item-form"),r=s.find(".checkbox-input"),p=s.parents(".window-price-sheet-6-calculation-quote-items-body").find(".checkbox-input:checked"),u="";if(r.is(":checked")&&p.length){u=[];var f=0;p.each((function(){var o=$(this).parents(".update-window-price-sheet-6-calculation-quote-item-form"),s=o.find("[name='"+l+"']");s.val(d),("width"===s.attr("name")||"drop"===s.attr("name")||"type"===s.attr("name")||s.hasClass("window-price-sheet-6-calculation-field"))&&"1"!==quote_status&&t(s),"width"!==s.attr("name")&&"type"!==s.attr("name")||"1"!==quote_status&&a(s),"material"===s.attr("name")&&i(s),("width"===s.attr("name")||"drop"===s.attr("name")||"type"===s.attr("name")||s.hasClass("window-price-sheet-6-calculation-field"))&&"1"!==quote_status?e.done((function(){f+=1,u.push(o.serialize()),p.length===f&&c(n,u)})):(f+=1,u.push(o.serialize()),p.length===f&&c(n,u))}))}else("width"===n.attr("name")||"drop"===n.attr("name")||"type"===n.attr("name")||n.hasClass("window-price-sheet-6-calculation-field"))&&"1"!==quote_status&&t(n),"width"!==n.attr("name")&&"type"!==n.attr("name")||"1"!==quote_status&&a(n),"material"===n.attr("name")&&i(n),("width"===n.attr("name")||"drop"===n.attr("name")||"type"===n.attr("name")||n.hasClass("window-price-sheet-6-calculation-field"))&&"1"!==quote_status?e.done((function(){u=[s.serialize()],c(n,u)})):(u=[s.serialize()],c(n,u))})),$(document).on("keypress",".add-window-price-sheet-6-calculation-accessory-qty",(function(e){13===e.keyCode&&(e.preventDefault(),$(this).siblings(".add-window-price-sheet-6-calculation-accessories").click())})),$(document).on("click",".add-window-price-sheet-6-calculation-accessories",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=e.siblings(".window-price-sheet-6-calculation-accessories"),i=e.siblings(".add-window-price-sheet-6-calculation-accessory-qty"),o=e.siblings(".add-window-price-sheet-6-calculation-accessory-mm"),n=t.find(".window-price-sheet-6-calculation-code").val(),l=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),c=a.val(),d=+i.val(),s=o.val();d=0!==d?d:1,c&&$.ajax({url:"window-price-sheet-6-calculation/scripts/add-window-price-sheet-6-calculation-quote-item-accessory.php",type:"POST",dataType:"json",data:{cid:cid,window_price_sheet_6_calculation_code:n,window_price_sheet_6_calculation_quote_item_code:l,accessory:c,accessory_qty:d,accessory_mm:s},beforeSend:function(){e.prop("disabled",!1).addClass("field-loader"),a.addClass("field-loader"),i.addClass("field-loader"),o.addClass("field-loader")},success:function(n){if(4===n[0])document.location.replace(n[1]);else if(2===n[0])e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),o.removeClass("field-loader"),alert(n[1]);else if(1===n[0]){var l=c.split("<->")[0],r=c.split("<->")[1],p=+c.split("<->")[2].replace(/,/g,""),u=(p*d).toFixed(2);t.find(".table-more-accessories").append('<span class="window-price-sheet-6-calculation-accessories-wrapper">\n                                                                                <input type="text" class="window-price-sheet-6-calculation-accessory" readonly disabled value="'+r+" | "+s+" | "+p+" x "+d+" = "+u+'">\n                                                                                <input type="button" class="delete-window-price-sheet-6-calculation-accessory bttn-input" data-code="'+l+'" value="✖">\n                                                                            </span>').find(".bttn-input").button(),a.val("").focus(),i.val(""),o.val("");var f=t.find(".window-price-sheet-6-calculation-notes").val().length,h=t.find(".window-price-sheet-6-calculation-accessory").length,w=t.find(".window-price-sheet-6-calculation-per-meter").length,m=t.find(".window-price-sheet-6-calculation-fitting-charge").length;f||h||w||m?t.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):t.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),o.removeClass("field-loader"),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")}else e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),o.removeClass("field-loader"),alert(JSON.stringify(n))},error:function(t,n,l){e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),o.removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @add-window-price-sheet-6-calculation-quote-item-accessory")}})})),$(document).on("click",".delete-window-price-sheet-6-calculation-accessory",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=t.find(".window-price-sheet-6-calculation-accessories"),i=e.parent(".window-price-sheet-6-calculation-accessories-wrapper"),o=t.find(".window-price-sheet-6-calculation-code").val(),n=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),l=e.attr("data-code");$.ajax({url:"window-price-sheet-6-calculation/scripts/delete-window-price-sheet-6-calculation-quote-item-accessory.php",type:"POST",dataType:"json",data:{cid:cid,window_price_sheet_6_calculation_code:o,window_price_sheet_6_calculation_quote_item_code:n,accessory_code:l},beforeSend:function(){e.prop("disabled",!1).addClass("field-loader")},success:function(o){if(4===o[0])document.location.replace(o[1]);else if(2===o[0])e.prop("disabled",!1).removeClass("field-loader"),alert(o[1]);else if(1===o[0]){i.remove(),a.find('option[data-code="'+l+'"]').show(),a.val("");var n=t.find(".window-price-sheet-6-calculation-notes").val().length,c=t.find(".window-price-sheet-6-calculation-accessory").length,d=t.find(".window-price-sheet-6-calculation-per-meter").length,s=t.find(".window-price-sheet-6-calculation-fitting-charge").length;n||c||d||s?t.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):t.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),e.prop("disabled",!1).removeClass("field-loader"),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")}else e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(o))},error:function(t,a,i){e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @delete-window-price-sheet-6-calculation-quote-item-accessory")}})})),$(document).on("keypress",".add-window-price-sheet-6-calculation-per-meter-width",(function(e){13===e.keyCode&&(e.preventDefault(),$(this).siblings(".add-window-price-sheet-6-calculation-per-meters").click())})),$(document).on("click",".add-window-price-sheet-6-calculation-per-meters",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=e.siblings(".window-price-sheet-6-calculation-per-meters"),i=e.siblings(".add-window-price-sheet-6-calculation-per-meter-width"),o=t.find(".window-price-sheet-6-calculation-code").val(),n=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),l=a.val(),c=+i.val();c=0!==c?c:1,l&&$.ajax({url:"window-price-sheet-6-calculation/scripts/add-window-price-sheet-6-calculation-quote-item-per-meter.php",type:"POST",dataType:"json",data:{cid:cid,window_price_sheet_6_calculation_code:o,window_price_sheet_6_calculation_quote_item_code:n,per_meter:l,per_meter_width:c},beforeSend:function(){e.prop("disabled",!1).addClass("field-loader"),a.addClass("field-loader"),i.addClass("field-loader")},success:function(o){if(4===o[0])document.location.replace(o[1]);else if(2===o[0])e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),alert(o[1]);else if(1===o[0]){var n=l.split("<->")[0],d=l.split("<->")[1],s=+l.split("<->")[2].replace(/,/g,""),r=(s*c).toFixed(2);t.find(".table-more-per-meters").append('<span class="window-price-sheet-6-calculation-per-meters-wrapper">\n                                                                                <input type="text" class="window-price-sheet-6-calculation-per-meter" readonly disabled value="'+d+" | "+s+" x "+c+" = "+r+'">\n                                                                                <input type="button" class="delete-window-price-sheet-6-calculation-per-meter bttn-input" data-code="'+n+'" value="✖">\n                                                                            </span>').find(".bttn-input").button(),a.find('option[data-code="'+n+'"]').hide(),a.val("").focus(),i.val("");var p=t.find(".window-price-sheet-6-calculation-notes").val().length,u=t.find(".window-price-sheet-6-calculation-accessory").length,f=t.find(".window-price-sheet-6-calculation-per-meter").length,h=t.find(".window-price-sheet-6-calculation-fitting-charge").length;p||u||f||h?t.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):t.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")}else e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),alert(JSON.stringify(o))},error:function(t,o,n){e.prop("disabled",!1).removeClass("field-loader"),a.removeClass("field-loader"),i.removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @add-window-price-sheet-6-calculation-quote-item-per-meter")}})})),$(document).on("click",".delete-window-price-sheet-6-calculation-per-meter",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=t.find(".window-price-sheet-6-calculation-per-meters"),i=e.parent(".window-price-sheet-6-calculation-per-meters-wrapper"),o=t.find(".window-price-sheet-6-calculation-code").val(),n=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),l=e.attr("data-code");$.ajax({url:"window-price-sheet-6-calculation/scripts/delete-window-price-sheet-6-calculation-quote-item-per-meter.php",type:"POST",dataType:"json",data:{cid:cid,window_price_sheet_6_calculation_code:o,window_price_sheet_6_calculation_quote_item_code:n,per_meter_code:l},beforeSend:function(){e.prop("disabled",!1).addClass("field-loader")},success:function(o){if(4===o[0])document.location.replace(o[1]);else if(2===o[0])e.prop("disabled",!1).removeClass("field-loader"),alert(o[1]);else if(1===o[0]){i.remove(),a.find('option[data-code="'+l+'"]').show(),a.val("");var n=t.find(".window-price-sheet-6-calculation-notes").val().length,c=t.find(".window-price-sheet-6-calculation-accessory").length,d=t.find(".window-price-sheet-6-calculation-per-meter").length,s=t.find(".window-price-sheet-6-calculation-fitting-charge").length;n||c||d||s?t.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):t.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),e.prop("disabled",!1).removeClass("field-loader"),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")}else e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(o))},error:function(t,a,i){e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @delete-window-price-sheet-6-calculation-quote-item-accessory")}})})),$(document).on("click",".add-window-price-sheet-6-calculation-fitting-charges",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=e.siblings(".window-price-sheet-6-calculation-fitting-charges"),i=t.find(".window-price-sheet-6-calculation-code").val(),o=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),n=a.val();n&&$.ajax({url:"window-price-sheet-6-calculation/scripts/add-window-price-sheet-6-calculation-quote-item-fitting-charge.php",type:"POST",dataType:"json",data:{cid:cid,window_price_sheet_6_calculation_code:i,window_price_sheet_6_calculation_quote_item_code:o,fitting_charge:n},beforeSend:function(){e.prop("disabled",!1).addClass("field-loader"),a.toggleClass("field-loader")},success:function(i){if(4===i[0])document.location.replace(i[1]);else if(2===i[0])e.prop("disabled",!1).removeClass("field-loader"),a.toggleClass("field-loader"),alert(i[1]);else if(1===i[0]){var o=n.split("<->")[0],l=n.split("<->")[1],c=n.split("<->")[2];t.find(".table-more-fitting-charges").append('<span class="window-price-sheet-6-calculation-fitting-charges-wrapper">\n                                                                                    <input type="text" class="window-price-sheet-6-calculation-fitting-charge" readonly disabled value="'+l+" | "+c+'">\n                                                                                    <input type="button" class="delete-window-price-sheet-6-calculation-fitting-charge bttn-input" data-code="'+o+'" value="✖">\n                                                                                </span>').find(".bttn-input").button(),a.find('option[data-code="'+o+'"]').hide(),a.val("");var d=t.find(".window-price-sheet-6-calculation-notes").val().length,s=t.find(".window-price-sheet-6-calculation-accessory").length,r=t.find(".window-price-sheet-6-calculation-fitting-charge").length;d||s||r?t.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):t.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),e.prop("disabled",!1).removeClass("field-loader"),a.toggleClass("field-loader"),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")}else e.prop("disabled",!1).removeClass("field-loader"),a.toggleClass("field-loader"),alert(JSON.stringify(i))},error:function(t,i,o){e.prop("disabled",!1).removeClass("field-loader"),a.toggleClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @add-window-price-sheet-6-calculation-quote-item-fitting-charge")}})})),$(document).on("click",".delete-window-price-sheet-6-calculation-fitting-charge",(function(){var e=$(this),t=e.parents(".update-window-price-sheet-6-calculation-quote-item-form"),a=t.find(".window-price-sheet-6-calculation-fitting-charges"),i=e.parent(".window-price-sheet-6-calculation-fitting-charges-wrapper"),o=t.find(".window-price-sheet-6-calculation-code").val(),n=t.find(".window-price-sheet-6-calculation-quote-item-code").val(),l=e.attr("data-code");$.ajax({url:"window-price-sheet-6-calculation/scripts/delete-window-price-sheet-6-calculation-quote-item-fitting-charge.php",type:"POST",dataType:"json",data:{cid:cid,window_price_sheet_6_calculation_code:o,window_price_sheet_6_calculation_quote_item_code:n,fitting_charge_code:l},beforeSend:function(){e.prop("disabled",!1).addClass("field-loader")},success:function(o){if(4===o[0])document.location.replace(o[1]);else if(2===o[0])e.prop("disabled",!1).removeClass("field-loader"),alert(o[1]);else if(1===o[0]){i.remove(),a.find('option[data-code="'+l+'"]').show(),a.val("");var n=t.find(".window-price-sheet-6-calculation-notes").val().length,c=t.find(".window-price-sheet-6-calculation-accessory").length,d=t.find(".window-price-sheet-6-calculation-fitting-charge").length;n||c||d?t.find(".window-price-sheet-6-calculation-table-more-bttn").addClass("red"):t.find(".window-price-sheet-6-calculation-table-more-bttn").removeClass("red"),e.prop("disabled",!1).removeClass("field-loader"),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")}else e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(o))},error:function(t,a,i){e.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(t)),alert("Error! @delete-window-price-sheet-6-calculation-quote-item-fitting-charge")}})})),$(document).on("submit","#window-price-sheet-6-calculation-quote-items-results .group-discount-form",(function(e){e.preventDefault();var t=$(this),a=$(this).find("input[type='submit']"),i=isNaN(t.find(".group-discount").val())?"0":t.find(".group-discount").val(),o=isNaN(t.find(".group-total").val())?"0":t.find(".group-total").val(),n=t.find(".window-price-sheet-6-calculation-code").val(),l=(o-o*i/100).toFixed(2);$.ajax({url:"window-price-sheet-6-calculation/scripts/update-window-price-sheet-6-calculation-group-discount.php",type:"POST",dataType:"json",data:{cid:cid,discount:i,window_price_sheet_6_calculation_code:n},beforeSend:function(){a.prop("disabled",!1).addClass("field-loader")},success:function(e){4===e[0]?document.location.replace(e[1]):2===e[0]?(a.prop("disabled",!1).removeClass("field-loader"),alert(e[1])):1===e[0]?(t.siblings(".group-discount-total").html(l),a.prop("disabled",!1).removeClass("field-loader")):(a.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(e))),$("#getsum").load("getsum.php?cid="+cid).fadeIn("fast"),$("#totalx").load("megaTotal.php?cid="+cid).fadeIn("fast")},error:function(e,t,i){a.prop("disabled",!1).removeClass("field-loader"),alert(JSON.stringify(e)),alert("Error! @update-window-price-sheet-6-calculation-group-discount")}})}))}));